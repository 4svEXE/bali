import{$ as y,D as Ce,F as S,M as X,P as q,Sa as c,T as Fe,Ua as Ee,V as a,Va as J,Vb as k,W as M,Wb as Ae,Xa as B,Xb as Se,Y as f,Ya as P,_ as u,a as T,aa as ye,ab as N,bb as D,cb as Q,ea as we,ha as R,j as pe,k as K,ma as O,n as A,p as F,qa as v,r as Z,v as Y,w as W,x as me}from"./chunk-OKCL5SZC.js";var Oe=null;function ee(){return Oe}function Nt(n){Oe??=n}var ve=class{};var se=new f(""),oe=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=a({token:n,factory:()=>y(ke),providedIn:"platform"})}return n})(),kt=new f(""),ke=(()=>{class n extends oe{_location;_history;_doc=y(se);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ee().getBaseHref(this._doc)}onPopState(e){let t=ee().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){let t=ee().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,t,i){this._history.pushState(e,t,i)}replaceState(e,t,i){this._history.replaceState(e,t,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static \u0275fac=function(t){return new(t||n)};static \u0275prov=a({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function ae(n,r){return n?r?n.endsWith("/")?r.startsWith("/")?n+r.slice(1):n+r:r.startsWith("/")?n+r:`${n}/${r}`:n:r}function be(n){let r=n.match(/#|\?|$/),e=r&&r.index||n.length,t=e-(n[e-1]==="/"?1:0);return n.slice(0,t)+n.slice(e)}function h(n){return n&&n[0]!=="?"?"?"+n:n}var x=(()=>{class n{historyGo(e){throw new Error("")}static \u0275fac=function(t){return new(t||n)};static \u0275prov=a({token:n,factory:()=>y(xe),providedIn:"root"})}return n})(),Be=new f(""),xe=(()=>{class n extends x{_platformLocation;_baseHref;_removeListenerFns=[];constructor(e,t){super(),this._platformLocation=e,this._baseHref=t??this._platformLocation.getBaseHrefFromDOM()??y(se).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return ae(this._baseHref,e)}path(e=!1){let t=this._platformLocation.pathname+h(this._platformLocation.search),i=this._platformLocation.hash;return i&&e?`${t}${i}`:t}pushState(e,t,i,s){let o=this.prepareExternalUrl(i+h(s));this._platformLocation.pushState(e,t,o)}replaceState(e,t,i,s){let o=this.prepareExternalUrl(i+h(s));this._platformLocation.replaceState(e,t,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(t){return new(t||n)(u(oe),u(Be,8))};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),xt=(()=>{class n extends x{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(e,t){super(),this._platformLocation=e,t!=null&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash??"#";return t.length>0?t.substring(1):t}prepareExternalUrl(e){let t=ae(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,i,s){let o=this.prepareExternalUrl(i+h(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,t,o)}replaceState(e,t,i,s){let o=this.prepareExternalUrl(i+h(s));o.length==0&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static \u0275fac=function(t){return new(t||n)(u(oe),u(Be,8))};static \u0275prov=a({token:n,factory:n.\u0275fac})}return n})(),$e=(()=>{class n{_subject=new pe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(e){this._locationStrategy=e;let t=this._locationStrategy.getBaseHref();this._basePath=Ve(be(_e(t))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+h(t))}normalize(e){return n.stripTrailingSlash(Ue(this._basePath,_e(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,t="",i=null){this._locationStrategy.pushState(i,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+h(t)),i)}replaceState(e,t="",i=null){this._locationStrategy.replaceState(i,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+h(t)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}),()=>{let t=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(t,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(i=>i(e,t))}subscribe(e,t,i){return this._subject.subscribe({next:e,error:t??void 0,complete:i??void 0})}static normalizeQueryParams=h;static joinWithSlash=ae;static stripTrailingSlash=be;static \u0275fac=function(t){return new(t||n)(u(x))};static \u0275prov=a({token:n,factory:()=>je(),providedIn:"root"})}return n})();function je(){return new $e(u(x))}function Ue(n,r){if(!n||!r.startsWith(n))return r;let e=r.substring(n.length);return e===""||["/",";","?","#"].includes(e[0])?e:r}function _e(n){return n.replace(/\/index.html$/,"")}function Ve(n){if(new RegExp("^(https?:)?//").test(n)){let[,e]=n.split(/\/\/[^\/]+/);return e}return n}function $t(n,r){r=encodeURIComponent(r);for(let e of n.split(";")){let t=e.indexOf("="),[i,s]=t==-1?[e,""]:[e.slice(0,t),e.slice(t+1)];if(i.trim()===r)return decodeURIComponent(s)}return null}var te=/\s+/,Le=[],jt=(()=>{class n{_ngEl;_renderer;initialClasses=Le;rawClass;stateMap=new Map;constructor(e,t){this._ngEl=e,this._renderer=t}set klass(e){this.initialClasses=e!=null?e.trim().split(te):Le}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(te):e}ngDoCheck(){for(let t of this.initialClasses)this._updateState(t,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let t of e)this._updateState(t,!0);else if(e!=null)for(let t of Object.keys(e))this._updateState(t,!!e[t]);this._applyStateDiff()}_updateState(e,t){let i=this.stateMap.get(e);i!==void 0?(i.enabled!==t&&(i.changed=!0,i.enabled=t),i.touched=!0):this.stateMap.set(e,{enabled:t,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let t=e[0],i=e[1];i.changed?(this._toggleClass(t,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(t,!1),this.stateMap.delete(t)),i.touched=!1}}_toggleClass(e,t){e=e.trim(),e.length>0&&e.split(te).forEach(i=>{t?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(t){return new(t||n)(c(v),c(B))};static \u0275dir=D({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var ne=class{$implicit;ngForOf;index;count;constructor(r,e,t,i){this.$implicit=r,this.ngForOf=e,this.index=t,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ut=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(e,t,i){this._viewContainer=e,this._template=t,this._differs=i}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let t=this._viewContainer;e.forEachOperation((i,s,o)=>{if(i.previousIndex==null)t.createEmbeddedView(this._template,new ne(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)t.remove(s===null?void 0:s);else if(s!==null){let l=t.get(s);t.move(l,o),Ie(l,i)}});for(let i=0,s=t.length;i<s;i++){let l=t.get(i).context;l.index=i,l.count=s,l.ngForOf=this._ngForOf}e.forEachIdentityChange(i=>{let s=t.get(i.currentIndex);Ie(s,i)})}static ngTemplateContextGuard(e,t){return!0}static \u0275fac=function(t){return new(t||n)(c(P),c(J),c(Ae))};static \u0275dir=D({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Ie(n,r){n.context.$implicit=r.item}var Vt=(()=>{class n{_viewContainer;_context=new ie;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(e,t){this._viewContainer=e,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Te("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Te("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(e,t){return!0}static \u0275fac=function(t){return new(t||n)(c(P),c(J))};static \u0275dir=D({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),ie=class{$implicit=null;ngIf=null};function Te(n,r){if(!!!(!r||r.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Fe(r)}'.`)}var zt=(()=>{class n{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(e,t,i){this._ngEl=e,this._differs=t,this._renderer=i}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){let e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,t){let[i,s]=e.split("."),o=i.indexOf("-")===-1?void 0:Ee.DashCase;t!=null?this._renderer.setStyle(this._ngEl.nativeElement,i,s?`${t}${s}`:t,o):this._renderer.removeStyle(this._ngEl.nativeElement,i,o)}_applyChanges(e){e.forEachRemovedItem(t=>this._setStyle(t.key,null)),e.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),e.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}static \u0275fac=function(t){return new(t||n)(c(v),c(Se),c(B))};static \u0275dir=D({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return n})(),Gt=(()=>{class n{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(e){this._viewContainerRef=e}ngOnChanges(e){if(this._shouldRecreateView(e)){let t=this._viewContainerRef;if(this._viewRef&&t.remove(t.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let i=this._createContextForwardProxy();this._viewRef=t.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,t,i)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,t,i):!1,get:(e,t,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,t,i)}})}static \u0275fac=function(t){return new(t||n)(c(P))};static \u0275dir=D({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[we]})}return n})();var Ht=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=N({type:n});static \u0275inj=M({})}return n})(),ze="browser",Ge="server";function Kt(n){return n===ze}function Zt(n){return n===Ge}var Yt=(()=>{class n{static \u0275prov=a({token:n,providedIn:"root",factory:()=>new re(y(se),window)})}return n})(),re=class{document;window;offset=()=>[0,0];constructor(r,e){this.document=r,this.window=e}setOffset(r){Array.isArray(r)?this.offset=()=>r:this.offset=r}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(r){this.window.scrollTo(r[0],r[1])}scrollToAnchor(r){let e=He(this.document,r);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(r){this.window.history.scrollRestoration=r}scrollToElement(r){let e=r.getBoundingClientRect(),t=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(t-s[0],i-s[1])}};function He(n,r){let e=n.getElementById(r)||n.getElementsByName(r)[0];if(e)return e;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let t=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=t.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(r)||s.querySelector(`[name="${r}"]`);if(o)return o}i=t.nextNode()}}return null}var Me=class{};var Pe=class n{favoritesSubject=new K(this.getFavoritesFromLocalStorage());favoritesCountSubject=new K(this.getFavoritesFromLocalStorage().length);favorites$=this.favoritesSubject.asObservable();favoritesCount$=this.favoritesCountSubject.asObservable();constructor(){}addToFavorites(r){let e=this.getFavoritesFromLocalStorage();e.includes(r)?console.log("\u0426\u0435\u0439 \u0442\u043E\u0432\u0430\u0440 \u0432\u0436\u0435 \u0454 \u0432 \u043E\u0431\u0440\u0430\u043D\u0438\u0445"):(e.push(r),this.saveFavoritesToLocalStorage(e),this.favoritesSubject.next(e),this.favoritesCountSubject.next(e.length))}removeFromFavorites(r){let e=this.getFavoritesFromLocalStorage();e=e.filter(t=>t!==r),this.saveFavoritesToLocalStorage(e),this.favoritesSubject.next(e),this.favoritesCountSubject.next(e.length)}getFavoritesFromLocalStorage(){let r=localStorage.getItem("favorites");return r?JSON.parse(r):[]}saveFavoritesToLocalStorage(r){localStorage.setItem("favorites",JSON.stringify(r))}isFavorite(r){return this.getFavoritesFromLocalStorage().includes(r)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})};var p=class{},ue=(()=>{class n extends p{getTranslation(e){return A({})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=R(n)))(i||n)}})();static \u0275prov=a({token:n,factory:n.\u0275fac})}return n})(),w=class{},ce=(()=>{class n{handle(e){return e.key}static \u0275fac=function(t){return new(t||n)};static \u0275prov=a({token:n,factory:n.\u0275fac})}return n})();function j(n,r){if(n===r)return!0;if(n===null||r===null)return!1;if(n!==n&&r!==r)return!0;let e=typeof n,t=typeof r,i,s,o;if(e==t&&e=="object")if(Array.isArray(n)){if(!Array.isArray(r))return!1;if((i=n.length)==r.length){for(s=0;s<i;s++)if(!j(n[s],r[s]))return!1;return!0}}else{if(Array.isArray(r))return!1;o=Object.create(null);for(s in n){if(!j(n[s],r[s]))return!1;o[s]=!0}for(s in r)if(!(s in o)&&typeof r[s]<"u")return!1;return!0}return!1}function g(n){return typeof n<"u"&&n!==null}function _(n){return $(n)&&!ge(n)&&n!==null}function $(n){return typeof n=="object"}function ge(n){return Array.isArray(n)}function De(n){return typeof n=="string"}function Ke(n){return typeof n=="function"}function le(n,r){let e=Object.assign({},n);return $(n)?($(n)&&$(r)&&Object.keys(r).forEach(t=>{_(r[t])?t in n?e[t]=le(n[t],r[t]):Object.assign(e,{[t]:r[t]}):Object.assign(e,{[t]:r[t]})}),e):le({},r)}function de(n,r){let e=r.split(".");r="";do r+=e.shift(),g(n)&&g(n[r])&&(_(n[r])||ge(n[r])||!e.length)?(n=n[r],r=""):e.length?r+=".":n=void 0;while(e.length);return n}function Ze(n,r,e){let t=r.split("."),i=n;for(let s=0;s<t.length;s++){let o=t[s];s===t.length-1?i[o]=e:((!i[o]||!_(i[o]))&&(i[o]={}),i=i[o])}}var m=class{},fe=(()=>{class n extends m{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,t){if(De(e))return this.interpolateString(e,t);if(Ke(e))return this.interpolateFunction(e,t)}interpolateFunction(e,t){return e(t)}interpolateString(e,t){return t?e.replace(this.templateMatcher,(i,s)=>{let o=de(t,s);return g(o)?o:i}):e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=R(n)))(i||n)}})();static \u0275prov=a({token:n,factory:n.\u0275fac})}return n})(),C=class{},he=(()=>{class n extends C{compile(e,t){return e}compileTranslations(e,t){return e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=R(n)))(i||n)}})();static \u0275prov=a({token:n,factory:n.\u0275fac})}return n})(),E=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new O;onLangChange=new O;onDefaultLangChange=new O},U=new f("ISOLATE_TRANSLATE_SERVICE"),V=new f("USE_DEFAULT_LANG"),z=new f("DEFAULT_LANGUAGE"),G=new f("USE_EXTEND"),b=n=>F(n)?n:A(n),H=(()=>{class n{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,t,i,s,o,l=!0,d=!1,L=!1,I){this.store=e,this.currentLoader=t,this.compiler=i,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=l,this.extend=L,d&&(this.store=new E),I&&this.setDefaultLang(I)}setDefaultLang(e){if(e===this.defaultLang)return;let t=this.retrieveTranslations(e);typeof t<"u"?(this.defaultLang==null&&(this.defaultLang=e),t.pipe(S(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return A(this.translations[e]);this.currentLang||(this.currentLang=e);let t=this.retrieveTranslations(e);return F(t)?(t.pipe(S(1)).subscribe(()=>{this.changeLang(e)}),t):(this.changeLang(e),A(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let t=this.currentLoader.getTranslation(e).pipe(X(1),S(1));return this.loadingTranslations=t.pipe(Z(i=>this.compiler.compileTranslations(i,e)),X(1),S(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[e]=this.extend&&this.translations[e]?T(T({},i),this.translations[e]):i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),t}setTranslation(e,t,i=!1){let s=this.compiler.compileTranslations(t,e);(i||this.extend)&&this.translations[e]?this.translations[e]=le(this.translations[e],s):this.translations[e]=s,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){let t=e.filter(i=>!this.langs.includes(i));t.length>0&&(this.langs=[...this.langs,...t])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,t,i){let s;if(e&&(s=this.runInterpolation(de(e,t),i)),s===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.runInterpolation(de(this.translations[this.defaultLang],t),i)),s===void 0){let o={key:t,translateService:this};typeof i<"u"&&(o.interpolateParams=i),s=this.missingTranslationHandler.handle(o)}return s!==void 0?s:t}runInterpolation(e,t){if(ge(e))return e.map(i=>this.runInterpolation(i,t));if(_(e)){let i={};for(let s in e){let o=this.runInterpolation(e[s],t);o!==void 0&&(i[s]=o)}return i}else return this.parser.interpolate(e,t)}getParsedResult(e,t,i){if(t instanceof Array){let s={},o=!1;for(let d of t)s[d]=this.getParsedResultForKey(e,d,i),o=o||F(s[d]);if(!o)return s;let l=t.map(d=>b(s[d]));return me(l).pipe(Z(d=>{let L={};return d.forEach((I,Ne)=>{L[t[Ne]]=I}),L}))}return this.getParsedResultForKey(e,t,i)}get(e,t){if(!g(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(Ce(i=>b(this.getParsedResult(i,e,t)))):b(this.getParsedResult(this.translations[this.currentLang],e,t))}getStreamOnTranslationChange(e,t){if(!g(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return Y(W(()=>this.get(e,t)),this.onTranslationChange.pipe(q(i=>{let s=this.getParsedResult(i.translations,e,t);return b(s)})))}stream(e,t){if(!g(e)||!e.length)throw new Error('Parameter "key" required');return Y(W(()=>this.get(e,t)),this.onLangChange.pipe(q(i=>{let s=this.getParsedResult(i.translations,e,t);return b(s)})))}instant(e,t){if(!g(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let i=this.getParsedResult(this.translations[this.currentLang],e,t);return F(i)?Array.isArray(e)?e.reduce((s,o)=>(s[o]=o,s),{}):e:i}set(e,t,i=this.currentLang){Ze(this.translations[i],e,De(t)?this.compiler.compile(t,i):this.compiler.compileTranslations(t,i)),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(t){return new(t||n)(u(E),u(p),u(C),u(m),u(w),u(V),u(U),u(G),u(z))};static \u0275prov=a({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var ln=(()=>{class n{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,t){this.translate=e,this._ref=t}updateValue(e,t,i){let s=o=>{this.value=o!==void 0?o:e,this.lastKey=e,this._ref.markForCheck()};if(i){let o=this.translate.getParsedResult(i,e,t);F(o)?o.subscribe(s):s(o)}this.translate.get(e,t).subscribe(s)}transform(e,...t){if(!e||!e.length)return e;if(j(e,this.lastKey)&&j(t,this.lastParams))return this.value;let i;if(g(t[0])&&t.length)if(De(t[0])&&t[0].length){let s=t[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{i=JSON.parse(s)}catch(o){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${t[0]}`)}}else _(t[0])&&(i=t[0]);return this.lastKey=e,this.lastParams=t,this.updateValue(e,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,i,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,i,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(t){return new(t||n)(c(H,16),c(k,16))};static \u0275pipe=Q({name:"translate",type:n,pure:!1});static \u0275prov=a({token:n,factory:n.\u0275fac})}return n})();var dn=(n={})=>ye([n.loader||{provide:p,useClass:ue},n.compiler||{provide:C,useClass:he},n.parser||{provide:m,useClass:fe},n.missingTranslationHandler||{provide:w,useClass:ce},E,{provide:U,useValue:n.isolate},{provide:V,useValue:n.useDefaultLang},{provide:G,useValue:n.extend},{provide:z,useValue:n.defaultLanguage},H]),fn=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[e.loader||{provide:p,useClass:ue},e.compiler||{provide:C,useClass:he},e.parser||{provide:m,useClass:fe},e.missingTranslationHandler||{provide:w,useClass:ce},E,{provide:U,useValue:e.isolate},{provide:V,useValue:e.useDefaultLang},{provide:G,useValue:e.extend},{provide:z,useValue:e.defaultLanguage},H]}}static forChild(e={}){return{ngModule:n,providers:[e.loader||{provide:p,useClass:ue},e.compiler||{provide:C,useClass:he},e.parser||{provide:m,useClass:fe},e.missingTranslationHandler||{provide:w,useClass:ce},{provide:U,useValue:e.isolate},{provide:V,useValue:e.useDefaultLang},{provide:G,useValue:e.extend},{provide:z,useValue:e.defaultLanguage},H]}}static \u0275fac=function(t){return new(t||n)};static \u0275mod=N({type:n});static \u0275inj=M({})}return n})();export{ee as a,Nt as b,ve as c,se as d,kt as e,x as f,xe as g,xt as h,$e as i,$t as j,jt as k,Ut as l,Vt as m,zt as n,Gt as o,Ht as p,ze as q,Kt as r,Zt as s,Yt as t,Me as u,Pe as v,p as w,E as x,H as y,ln as z,dn as A,fn as B};
